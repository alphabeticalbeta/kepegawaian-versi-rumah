<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Universitas - New Action Buttons</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-2xl font-bold mb-6">Test Admin Universitas - New Action Buttons</h1>

        <!-- New Features Info -->
        <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6">
            <div class="bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-5">
                <h2 class="text-xl font-bold text-white">✅ New Action Buttons Added!</h2>
            </div>

            <div class="p-6">
                <div class="space-y-4">
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <h3 class="font-bold text-green-800 mb-2">✅ Buttons Added:</h3>
                        <ul class="text-green-700 text-sm space-y-1">
                            <li>• <strong>Perbaikan ke Pegawai</strong> - Kembalikan usulan ke pegawai untuk perbaikan</li>
                            <li>• <strong>Perbaikan ke Fakultas</strong> - Kembalikan usulan ke fakultas untuk perbaikan</li>
                            <li>• <strong>Teruskan ke Penilai</strong> - Lanjutkan usulan ke tim penilai</li>
                            <li>• <strong>Teruskan ke Senat</strong> - Lanjutkan ke senat (aktif jika ada rekomendasi penilai)</li>
                        </ul>
                    </div>

                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h3 class="font-bold text-blue-800 mb-2">📋 Features:</h3>
                        <ul class="text-blue-700 text-sm space-y-1">
                            <li>• SweetAlert2 modals untuk konfirmasi</li>
                            <li>• Input catatan untuk setiap action</li>
                            <li>• Conditional button "Teruskan ke Senat" berdasarkan rekomendasi penilai</li>
                            <li>• Color-coded buttons dengan icons</li>
                            <li>• Validation pada JavaScript dan backend</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Preview Action Buttons -->
        <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
            <div class="bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-5">
                <h2 class="text-xl font-bold text-white">🎮 Preview Action Buttons</h2>
            </div>

            <div class="p-6">
                <div class="flex items-center gap-3 flex-wrap mb-6">
                    <button onclick="testPerbaikanPegawai()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2">
                        <span>👤</span>
                        Perbaikan ke Pegawai
                    </button>

                    <button onclick="testPerbaikanFakultas()" class="px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2">
                        <span>🏢</span>
                        Perbaikan ke Fakultas
                    </button>

                    <button onclick="testTeruskanPenilai()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2">
                        <span>✅</span>
                        Teruskan ke Penilai
                    </button>

                    <button onclick="testTeruskanSenat()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2">
                        <span>👑</span>
                        Teruskan ke Senat
                    </button>

                    <button onclick="testTeruskanSenatDisabled()" class="px-4 py-2 bg-gray-400 cursor-not-allowed text-white rounded-lg transition-colors flex items-center gap-2" disabled>
                        <span>👑</span>
                        Teruskan ke Senat (Disabled)
                    </button>
                </div>

                <small class="text-gray-500 text-xs">* Buttons di atas untuk testing UI saja</small>
            </div>
        </div>

        <!-- Implementation Details -->
        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Frontend Implementation -->
            <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
                <div class="bg-gradient-to-r from-yellow-600 to-orange-600 px-6 py-5">
                    <h2 class="text-lg font-bold text-white">🎨 Frontend Implementation</h2>
                </div>
                <div class="p-6">
                    <div class="space-y-3 text-sm">
                        <div><strong>View:</strong> shared/usulan-detail.blade.php</div>
                        <div><strong>Role Config:</strong> Admin Universitas specific buttons</div>
                        <div><strong>JavaScript:</strong> SweetAlert2 modals</div>
                        <div><strong>Validation:</strong> Client-side catatan required</div>
                        <div><strong>Icons:</strong> Lucide icons untuk setiap button</div>
                        <div><strong>Colors:</strong>
                            <ul class="mt-1 ml-4">
                                <li>• Red: Perbaikan ke Pegawai</li>
                                <li>• Amber: Perbaikan ke Fakultas</li>
                                <li>• Blue: Teruskan ke Penilai</li>
                                <li>• Purple: Teruskan ke Senat</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backend Implementation -->
            <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
                <div class="bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-5">
                    <h2 class="text-lg font-bold text-white">⚙️ Backend Implementation</h2>
                </div>
                <div class="p-6">
                    <div class="space-y-3 text-sm">
                        <div><strong>Controller:</strong> UsulanValidationController</div>
                        <div><strong>Actions:</strong>
                            <ul class="mt-1 ml-4">
                                <li>• return_to_pegawai</li>
                                <li>• return_to_fakultas</li>
                                <li>• forward_to_penilai</li>
                                <li>• forward_to_senat</li>
                            </ul>
                        </div>
                        <div><strong>Validation:</strong> Server-side validation</div>
                        <div><strong>Status Updates:</strong> Otomatis update status usulan</div>
                        <div><strong>Cache:</strong> Clear validation cache</div>
                        <div><strong>Conditional:</strong> Cek rekomendasi penilai untuk senat</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary -->
        <div class="mt-6 p-4 bg-green-100 border border-green-300 rounded-lg">
            <h3 class="font-bold text-green-800">🎯 Summary Implementation:</h3>
            <ul class="text-green-700 mt-2 space-y-1">
                <li>• ✅ 4 button baru untuk Admin Universitas</li>
                <li>• ✅ JavaScript handlers dengan SweetAlert2</li>
                <li>• ✅ Backend methods untuk semua action</li>
                <li>• ✅ Conditional logic untuk button "Teruskan ke Senat"</li>
                <li>• ✅ Validation di frontend dan backend</li>
                <li>• ✅ Status updates dan cache clearing</li>
                <li>• ✅ User-friendly modals dengan input catatan</li>
            </ul>
        </div>
    </div>

    <script>
        function testPerbaikanPegawai() {
            Swal.fire({
                title: 'Perbaikan ke Pegawai',
                text: 'Usulan akan dikembalikan ke pegawai untuk perbaikan. Silakan berikan catatan perbaikan.',
                input: 'textarea',
                inputPlaceholder: 'Masukkan catatan perbaikan untuk pegawai...',
                showCancelButton: true,
                confirmButtonText: 'Kembalikan ke Pegawai',
                cancelButtonText: 'Batal',
                confirmButtonColor: '#dc2626',
                preConfirm: (catatan) => {
                    if (!catatan || catatan.trim() === '') {
                        Swal.showValidationMessage('Catatan perbaikan wajib diisi');
                        return false;
                    }
                    return catatan;
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire('Test', 'Action: return_to_pegawai\nCatatan: ' + result.value, 'success');
                }
            });
        }

        function testPerbaikanFakultas() {
            Swal.fire({
                title: 'Perbaikan ke Fakultas',
                text: 'Usulan akan dikembalikan ke fakultas untuk perbaikan. Silakan berikan catatan perbaikan.',
                input: 'textarea',
                inputPlaceholder: 'Masukkan catatan perbaikan untuk fakultas...',
                showCancelButton: true,
                confirmButtonText: 'Kembalikan ke Fakultas',
                cancelButtonText: 'Batal',
                confirmButtonColor: '#ea580c'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire('Test', 'Action: return_to_fakultas\nCatatan: ' + (result.value || 'Kosong'), 'success');
                }
            });
        }

        function testTeruskanPenilai() {
            Swal.fire({
                title: 'Teruskan ke Tim Penilai',
                text: 'Usulan akan diteruskan ke tim penilai untuk direview. Pastikan validasi sudah lengkap.',
                input: 'textarea',
                inputPlaceholder: 'Catatan untuk tim penilai (opsional)...',
                showCancelButton: true,
                confirmButtonText: 'Teruskan ke Penilai',
                cancelButtonText: 'Batal',
                confirmButtonColor: '#2563eb'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire('Test', 'Action: forward_to_penilai\nCatatan: ' + (result.value || 'Kosong'), 'success');
                }
            });
        }

        function testTeruskanSenat() {
            Swal.fire({
                title: 'Teruskan ke Tim Senat',
                text: 'Usulan akan diteruskan ke tim senat untuk keputusan final.',
                input: 'textarea',
                inputPlaceholder: 'Catatan untuk tim senat (opsional)...',
                showCancelButton: true,
                confirmButtonText: 'Teruskan ke Senat',
                cancelButtonText: 'Batal',
                confirmButtonColor: '#7c3aed'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire('Test', 'Action: forward_to_senat\nCatatan: ' + (result.value || 'Kosong'), 'success');
                }
            });
        }

        function testTeruskanSenatDisabled() {
            Swal.fire({
                title: 'Tidak Dapat Melanjutkan',
                text: 'Button ini tidak aktif karena belum ada rekomendasi dari Tim Penilai.',
                icon: 'warning',
                confirmButtonText: 'Mengerti'
            });
        }
    </script>
</body>
</html>
