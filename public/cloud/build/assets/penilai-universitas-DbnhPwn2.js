var f=(c,e)=>()=>(e||c((e={exports:{}}).exports,e),e.exports);var m=f((p,d)=>{class u{constructor(){this.init()}init(){this.setupCsrfToken(),this.initializeSidebar(),this.initializeDropdowns(),this.initializeDataTables(),this.initializeFormValidation(),this.initializeFileUploads(),this.initializeAlerts(),this.initializePenilaian(),this.initializeValidationScripts()}setupCsrfToken(){const e=document.querySelector('meta[name="csrf-token"]');e&&(window.csrfToken=e.getAttribute("content"),window.fetchWithCsrf=function(i,t={}){return t.headers=t.headers||{},t.headers["X-CSRF-TOKEN"]=window.csrfToken,t.headers["X-Requested-With"]="XMLHttpRequest",fetch(i,t)})}initializeIcons(){typeof lucide<"u"&&lucide.createIcons()}initializeSidebar(){const e=document.getElementById("sidebar"),i=document.getElementById("main-content");e&&i&&(window.toggleSidebar=()=>{const t=!e.classList.contains("w-20");e.classList.toggle("w-64",!t),e.classList.toggle("w-20",t),i.style.marginLeft=t?"5rem":"16rem",document.querySelectorAll(".sidebar-text").forEach(n=>{n.classList.toggle("hidden",t)}),t&&document.querySelectorAll(".dropdown-menu").forEach(n=>{n.classList.add("hidden");const a=document.querySelector(`[data-collapse-toggle="${n.id}"]`);if(a){a.setAttribute("aria-expanded","false");const o=a.querySelector('[data-lucide="chevron-down"]');o&&o.classList.remove("rotate-180")}})})}initializeDropdowns(){document.querySelectorAll("button[data-collapse-toggle]").forEach(e=>{e.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();const t=this.getAttribute("data-collapse-toggle"),n=document.getElementById(t);if(!n)return;const a=n.classList.contains("hidden");a&&document.querySelectorAll(".dropdown-menu").forEach(l=>{if(l.id!==t){l.classList.add("hidden");const s=document.querySelector(`[data-collapse-toggle="${l.id}"]`);if(s){s.setAttribute("aria-expanded","false");const r=s.querySelector('[data-lucide="chevron-down"]');r&&r.classList.remove("rotate-180")}}}),n.classList.toggle("hidden"),this.setAttribute("aria-expanded",a);const o=this.querySelector('[data-lucide="chevron-down"]');o&&o.classList.toggle("rotate-180",a)})})}initializeDataTables(){typeof window.jQuery<"u"&&typeof window.jQuery.fn.DataTable<"u"?window.jQuery(".datatable").DataTable({responsive:!0,language:{url:"//cdn.datatables.net/plug-ins/1.10.24/i18n/Indonesian.json"}}):console.log("DataTables or jQuery not available, skipping DataTables initialization")}initializeFormValidation(){document.querySelectorAll("form").forEach(i=>{i.addEventListener("submit",function(t){console.log("Form submitted:",i.action)})})}initializeFileUploads(){window.previewUploadedFile=function(e,i){const t=e.files[0],n=document.getElementById(i);if(t){if(t.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan!"),e.value="";return}if(t.size>2097152){alert("Ukuran file maksimal 2MB!"),e.value="";return}const a=(t.size/1024/1024).toFixed(2),o=t.name;n&&(n.innerHTML=`
                        <div class="p-3 bg-green-50 border border-green-200 rounded-lg">
                            <div class="flex items-center gap-3">
                                <div class="flex-shrink-0 bg-green-100 rounded-full p-2">
                                    <i data-lucide="file-check" class="w-4 h-4 text-green-600"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-green-800 truncate">${o}</p>
                                    <div class="flex items-center gap-4 mt-1">
                                        <span class="text-xs text-green-600">Ukuran: ${a} MB</span>
                                        <span class="text-xs text-green-600 flex items-center gap-1">
                                            <i data-lucide="check-circle" class="w-3 h-3"></i>
                                            Siap diupload
                                        </span>
                                    </div>
                                </div>
                                <button type="button" onclick="clearFilePreview('${e.id}', '${i}')"
                                        class="flex-shrink-0 text-green-600 hover:text-green-800">
                                    <i data-lucide="x" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    `,n.classList.remove("hidden")),typeof lucide<"u"&&lucide.createIcons()}else n&&n.classList.add("hidden")},window.clearFilePreview=function(e,i){const t=document.getElementById(e),n=document.getElementById(i);t&&(t.value=""),n&&n.classList.add("hidden")}}initializeAlerts(){setTimeout(()=>{document.querySelectorAll(".alert").forEach(i=>{(i.classList.contains("alert-success")||i.classList.contains("alert-error"))&&(i.style.transition="opacity 0.5s ease-out",i.style.opacity="0",setTimeout(()=>i.remove(),500))})},5e3)}initializePenilaian(){window.nilaiUsulan=function(e){console.log("Nilai usulan:",e)},window.viewUsulanDetail=function(e){console.log("Viewing usulan detail:",e)},window.downloadDokumen=function(e){console.log("Downloading dokumen:",e)},window.calculateScore=function(){const e=document.querySelectorAll(".score-input");let i=0,t=0;e.forEach(o=>{const l=parseFloat(o.value)||0,s=parseFloat(o.dataset.weight)||1;i+=l*s,t+=s});const n=t>0?i/t:0,a=document.getElementById("final-score");a&&(a.textContent=n.toFixed(2))},document.addEventListener("input",(function(e){e.target.classList.contains("score-input")&&this.calculateScore()}).bind(this))}initializeValidationScripts(){window.toggleKeterangan=function(e,i){const t=document.getElementById(`keterangan_${e}`);t&&(i==="tidak_sesuai"?(t.disabled=!1,t.placeholder="Jelaskan mengapa item ini tidak sesuai...",t.focus()):(t.disabled=!0,t.placeholder='Pilih "Tidak Sesuai" untuk mengisi keterangan',t.value=""))},window.resetForm=function(){confirm("Apakah Anda yakin ingin mereset semua validasi?")&&document.querySelectorAll('select[name*="[status]"]').forEach(e=>{e.value="sesuai";const i=e.name.match(/validation\[(\w+)\]\[(\w+)\]/);i&&toggleKeterangan(i[1]+"_"+i[2],"sesuai")})},window.submitValidation=function(e){const i=document.getElementById("validationForm"),t=i.querySelector('input[name="action_type"]');t&&t.remove();const n=document.createElement("input");n.type="hidden",n.name="action_type",n.value="save_only",i.appendChild(n),this.showLoadingState()},this.showLoadingState=function(){const e=document.createElement("div");e.id="loadingOverlay",e.className="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",e.innerHTML=`
                <div class="relative top-1/2 transform -translate-y-1/2 mx-auto p-5 w-96">
                    <div class="bg-white rounded-lg shadow-xl p-6">
                        <div class="flex justify-center items-center">
                            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
                        </div>
                        <p class="text-center mt-4 text-gray-600">Memproses penilaian...</p>
                    </div>
                </div>
            `,document.body.appendChild(e)},document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('select[name*="[status]"]').forEach(e=>{const i=e.name.match(/validation\[(\w+)\]\[(\w+)\]/);i&&toggleKeterangan(i[1]+"_"+i[2],e.value)}),document.querySelectorAll("select[data-field-id]").forEach(e=>{e.addEventListener("change",function(i){const t=i.target.getAttribute("data-field-id"),n=i.target.value;toggleKeterangan(t,n)})})})}}document.addEventListener("DOMContentLoaded",function(){new u});typeof d<"u"&&d.exports&&(d.exports=u)});export default m();
