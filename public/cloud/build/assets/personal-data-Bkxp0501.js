document.addEventListener("DOMContentLoaded",function(){console.log("=== PERSONAL DATA SCRIPT LOADED ===");const l=document.getElementById("unit_kerja_id"),a=document.getElementById("sub_unit_kerja_id"),s=document.getElementById("sub_sub_unit_kerja_id"),d=document.getElementById("unit_kerja_id"),r=document.getElementById("unit_kerja_hierarchy_display");if(console.log("Elements found:",{unitKerjaSelect:!!l,subUnitKerjaSelect:!!a,subSubUnitKerjaSelect:!!s,unitKerjaTerakhirInput:!!d,hierarchyDisplay:!!r}),!l){console.error("‚ùå Unit Kerja select element not found!");return}if(!a){console.error("‚ùå Sub Unit Kerja select element not found!");return}if(!s){console.error("‚ùå Sub Sub Unit Kerja select element not found!");return}if(window.populateSubUnitKerja=function(){const e=l.value;if(console.log("üîÑ populateSubUnitKerja called with:",e),a.innerHTML='<option value="">Pilih Sub Unit Kerja</option>',s.innerHTML='<option value="">Pilih Sub-sub Unit Kerja</option>',!e){a.disabled=!0,s.disabled=!0,d.value="",r.classList.add("hidden"),console.log("‚ùå No unit kerja selected, disabling dropdowns");return}a.disabled=!1,console.log("‚úÖ Sub Unit Kerja dropdown enabled");const t=(window.subUnitKerjaOptions||{})[e]||{};console.log("üìä Available sub units for unit kerja",e,":",t),Object.keys(t).forEach(n=>{const i=document.createElement("option");i.value=n,i.textContent=t[n],a.appendChild(i),console.log("‚ûï Added option:",n,"-",t[n])}),d.value="",r.classList.add("hidden"),console.log("‚úÖ Sub Unit Kerja populated with",Object.keys(t).length,"options")},window.populateSubSubUnitKerja=function(){const e=a.value;if(console.log("üîÑ populateSubSubUnitKerja called with:",e),s.innerHTML='<option value="">Pilih Sub-sub Unit Kerja</option>',!e){s.disabled=!0,d.value="",r.classList.add("hidden"),console.log("‚ùå No sub unit kerja selected, disabling sub-sub dropdown");return}s.disabled=!1,console.log("‚úÖ Sub Sub Unit Kerja dropdown enabled");const t=(window.subSubUnitKerjaOptions||{})[e]||{};console.log("üìä Available sub-sub units for sub unit kerja",e,":",t),Object.keys(t).forEach(n=>{const i=document.createElement("option");i.value=n,i.textContent=t[n],s.appendChild(i),console.log("‚ûï Added option:",n,"-",t[n])}),d.value="",r.classList.add("hidden"),console.log("‚úÖ Sub-sub Unit Kerja populated with",Object.keys(t).length,"options")},window.displayHierarchy=function(){var j,g;const e=s.value;if(console.log("üîÑ displayHierarchy called with:",e),!e){d.value="",r.classList.add("hidden"),console.log("‚ùå No sub-sub unit kerja selected, hiding hierarchy");return}const o=l.value,t=a.value,n=window.unitKerjaOptions||{},i=window.subUnitKerjaOptions||{},u=window.subSubUnitKerjaOptions||{},p=n[o]||"Unknown",w=((j=i[o])==null?void 0:j[t])||"Unknown",h=((g=u[t])==null?void 0:g[e])||"Unknown",b=[p,w,h].join(" ‚Üí ");r.innerHTML=`
            <div class="flex items-start gap-3">
                <svg class="w-4 h-4 text-indigo-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <div class="flex-1">
                    <div class="font-semibold text-indigo-800 mb-1">Hierarki Unit Kerja yang Dipilih:</div>
                    <div class="text-indigo-700">${b}</div>
                </div>
            </div>
        `,r.classList.remove("hidden"),d.value=e,console.log("‚úÖ Hierarchy displayed:",b)},window.togglePasswordVisibility=function(e){const o=document.getElementById(e),t=document.querySelector(`[data-toggle="${e}"]`);o.type==="password"?(o.type="text",t.innerHTML=`
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path>
                </svg>
            `):(o.type="password",t.innerHTML=`
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                </svg>
            `)},window.checkPasswordStrength=function(e){const o=document.getElementById(e).value,t=document.getElementById("password-strength-bar"),n=document.getElementById("password-strength-text");if(!t||!n)return;let i=0;switch(o.length>=8&&i++,/[a-z]/.test(o)&&i++,/[A-Z]/.test(o)&&i++,/[0-9]/.test(o)&&i++,/[^A-Za-z0-9]/.test(o)&&i++,i){case 0:case 1:t.className="h-2 bg-red-500 rounded-full transition-all duration-300",n.textContent="Sangat Lemah",n.className="text-red-600 font-medium";break;case 2:t.className="h-2 bg-orange-500 rounded-full transition-all duration-300",n.textContent="Lemah",n.className="text-orange-600 font-medium";break;case 3:t.className="h-2 bg-yellow-500 rounded-full transition-all duration-300",n.textContent="Sedang",n.className="text-yellow-600 font-medium";break;case 4:t.className="h-2 bg-blue-500 rounded-full transition-all duration-300",n.textContent="Kuat",n.className="text-blue-600 font-medium";break;case 5:t.className="h-2 bg-green-500 rounded-full transition-all duration-300",n.textContent="Sangat Kuat",n.className="text-green-600 font-medium";break}const u=i/5*100;t.style.width=u+"%"},console.log("üîß Setting up event listeners..."),l){console.log("‚úÖ Adding event listener to unit kerja select"),l.addEventListener("change",function(o){console.log("üéØ Unit Kerja changed to:",this.value),populateSubUnitKerja()}),console.log("üß™ Testing unit kerja event listener...");const e=new Event("change");l.dispatchEvent(e)}else console.error("‚ùå Unit Kerja select not found for event listener");a?(console.log("‚úÖ Adding event listener to sub unit kerja select"),a.addEventListener("change",function(e){console.log("üéØ Sub Unit Kerja changed to:",this.value),populateSubSubUnitKerja()})):console.error("‚ùå Sub Unit Kerja select not found for event listener"),s?(console.log("‚úÖ Adding event listener to sub-sub unit kerja select"),s.addEventListener("change",function(e){console.log("üéØ Sub Sub Unit Kerja changed to:",this.value),displayHierarchy()})):console.error("‚ùå Sub Sub Unit Kerja select not found for event listener");const c=document.getElementById("password");c&&c.addEventListener("input",()=>checkPasswordStrength("password")),console.log("üîÑ Initializing with existing data..."),console.log("üìä Selected IDs:",{unitKerja:window.selectedUnitKerjaId,subUnitKerja:window.selectedSubUnitKerjaId,subSubUnitKerja:window.selectedSubSubUnitKerjaId}),window.selectedUnitKerjaId&&l&&(console.log("üéØ Setting unit kerja to:",window.selectedUnitKerjaId),l.value=window.selectedUnitKerjaId,populateSubUnitKerja(),window.selectedSubUnitKerjaId&&a&&setTimeout(()=>{console.log("üéØ Setting sub unit kerja to:",window.selectedSubUnitKerjaId),a.value=window.selectedSubUnitKerjaId,populateSubSubUnitKerja(),window.selectedSubSubUnitKerjaId&&s&&setTimeout(()=>{console.log("üéØ Setting sub-sub unit kerja to:",window.selectedSubSubUnitKerjaId),s.value=window.selectedSubSubUnitKerjaId,displayHierarchy()},100)},100)),console.log("üìä Data availability check:"),console.log("Unit Kerja Options:",window.unitKerjaOptions),console.log("Sub Unit Kerja Options:",window.subUnitKerjaOptions),console.log("Sub Sub Unit Kerja Options:",window.subSubUnitKerjaOptions),window.unitKerjaOptions&&Object.keys(window.unitKerjaOptions).length>0?console.log("‚úÖ Unit Kerja data is available"):console.log("‚ùå Unit Kerja data is missing or empty"),window.subUnitKerjaOptions&&Object.keys(window.subUnitKerjaOptions).length>0?console.log("‚úÖ Sub Unit Kerja data is available"):console.log("‚ùå Sub Unit Kerja data is missing or empty"),window.subSubUnitKerjaOptions&&Object.keys(window.subSubUnitKerjaOptions).length>0?console.log("‚úÖ Sub Sub Unit Kerja data is available"):console.log("‚ùå Sub Sub Unit Kerja data is missing or empty"),window.testUnitKerjaDropdowns=function(){console.log("üß™ Manual testing unit kerja dropdowns...");const e=window.unitKerjaOptions||{},o=Object.keys(e)[0];o?(console.log("üß™ Testing with unit kerja ID:",o),l.value=o,populateSubUnitKerja()):console.log("‚ùå No unit kerja options available for testing")},console.log("=== PERSONAL DATA SCRIPT COMPLETED ==="),console.log("üí° Use window.testUnitKerjaDropdowns() to manually test the dropdowns")});
